# Modsen Test Project

## Общая информация
Данный проект был разработан в качестве тестового задания для стажировки в компании Modsen.

## Используемые технологии
Проект написан с использованием JDK 21 и фреймворка Spring (Spring Boot, Spring DATA, Spring Security, Spring Cloud, Spring MVC). Проект представляет собой REST-API WEB-приложение, построенное по принципу MVC-модели. В качестве репозиториев использованы унаследованные от JPARepository классы. В проект добавлены объекты пересылки данных (DTO) и мапперы на основе MapStruct. Приложение включает валидацию данных, определенные исключения и их обработчик. Написаны тесты для методов мапперов, сервисов. Документация создана с помощью Swagger и Spring Open-API. Функционал API защищен JWT-токенами с помощью gateway-фильтра + Spring Security. Приложение использует PostgreSQL в качестве реляционной БД, Dockerfile и docker-compose для контейнеризации и развертывания.

## Структура приложения
Приложение имеет микросервисную архитектуру, включающую:

- **book-service**: предоставляет API для взаимодействия с объектами предметной области - книгами. Доступны следующие операции:
    - Получение списка всех книг
    - Добавление новой книги
    - Поиск книги по идентификатору
    - Поиск книги по ISBN
    - Обновление данных о книге
    - Удаление книги

- **library-service**: предоставляет API для учета книг в библиотеке. Доступны следующие операции:
    - Добавление книги в учет
    - Обновление данных об учете книги
    - Получение списка всех доступных книг

- **authentication-service**: предоставляет API для аутентификации пользователей. Доступны следующие операции:
    - Регистрация нового пользователя
    - Аутентификация пользователя - получение jwt-токена доступа
    - Проверка jwt-токена на валидность
  
- **api-gateway**
- **eureka-server**
- **PostgreSQL сервер** с базами данных `books`, `library`, `users`

## Запуск приложения
1. Создайте дирректорию в удобном Вам месте на Вашем компьютере.
2. Скопируйте данный репозиторий:
   ```sh
   git clone https://github.com/danilalisichkin/modsen-test-project
3. Перейдите внутрь директории modsen-test-project:
   ```sh
   cd modsen-test-project
   ```
4. Запустите файл docker-compose.yml:
   ```sh
   docker-compose up
   ```
5. Откройте удобный Вам браузер и перейдите по следующему URL:

http://localhost:8080/webjars/swagger-ui/index.html

Важно: для запуска проекта порты 8080, 8761, 5432 должны быть свободны.
       порт 8080 - API-Gateway
       порт 8761 - Eureka-сервер
       порт 5432 - база данных PostgreSQL

6. В загрузившемся окне Вы можете найти документацию по разработанному API, а также протестировать работу приложения с помощью интерактивных методов.

Важно: весь функционал API защищен с помощью jwt-токенов, поэтому перед обращением к book-service и library-service необходимо сделать следующие действия:
- зарегистрируйтесь в приложении

  обратитесь к следующему эндпоинту микросервиса аутентификации (authentication-service)
   ```sh
   POST api/v1/authentication/register
   ```
  в теле запроса укажите имя пользователя и пароль, отправьте запрос
- войдите в приложение

  обратитесь к следующему эндпоинту микросервиса аутентификации (authentication-service)
   ```sh
   POST api/v1/authentication/login
   ```
  в теле запроса укажите созданные ранее имя пользователя и пароль, отправьте запрос
- скопируйте полученный на прошлом шаге jwt-токен
- теперь при обращении к API микросервисов добавляйте данный jwt-токен в заголовок Authorization, тем самым Вы получите доступ к API

7. Все готово!
